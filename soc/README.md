# Эксперименты на социальных графах

 В папке содержатся скрипты, необходимые для моделирования процесса распространения информации в социальном графе.
Для работы необходимы две матрицы смежности социального графа: первая - определяющая связи на первом и на третьем
уровне, вторая - определяющая связи на втором уровне (уровень СМИ).
Файлы с матрицами смежности должны быть в формате *.mtx*. Если файл для первого и третьего уровня имеет название "name.mtx",
то второй должен называться "name-second.mtx".

Для старта процесса моделирования необходимо запустить скрипт **computeSIAP**. По умолчанию скрипт запустится с использованием
файла "random_100.mtx" и "random_100-second.mtx" с временем моделирования 2 секунды. 
Чтобы использовать другой файл необходимо изменить значение параметра *expName* (списко доступных файлов указагн ниже). Чтобы изменить время моделирования,
нужно изменить значение параметра *tf*
. В результате исполнения скрипта будет создана папка с именем, указанным в параметре *expName*. В папке будут находится
графики и таблица в формате *.xmlx* с результатами. 

В скрипте в цикле меняется параметр *g* модели. Если необходимо изучить влияние других параметров на систему,
то необходимо задать закон изменения этих параметров в цикле. Спискок всех параметров модели указан ниже. 




## Изменяемые параметры:

### Начальные условия:
precentA = 0.02; -- доля агентов в состоянии A

precentP = 0.05; -- доля агентов в состоянии Р

### Параметры модели:

param('bettaS') = 0.2; -- интенсиовность (вероятность) перехода S -> I

param('bettaA') = 0.4; -- интенсиовность (вероятность) перехода A -> I

param('g') = 0.95; -- интенсиовность (вероятность) перехода S -> A

param('gamma') = 0.3; -- интенсиовность (вероятность) перехода I -> P, A-> P

param('delta1') = 0.4; -- интенсиовность (вероятность) перехода I -> S

param('delta2') = 0.4; -- интенсиовность (вероятность) перехода P -> S

## Доступные матрицы смежности (значение параметра expName)

* socfb-Amherst41
* socfb-Bowdoin47
* socfb-Oberlin44
* random_1k
* random_100


#### Если ваша версия matlab поддерживает паралельные вычисления, то замените цикл *for* на *parfor* в файле **computeSIAP**, код реализован с учетом особенностей многопоточности в matlab.






## Краткое описание скриптов

### siapFunc.m
Основная функция. Принимает на вход
* A -- матрица смежности для трех уровней, имеет вид A = [LEVEL_1, LEVEL_2, LEVEL_3], где LEVEL_* - матрица смежности уровня
* n -- число узлов
* param -- структруа с параметрами модели
* initialV -- вектор начальных состояний
* t0, tf -- интервал моделирования

Возвращает структуру с результатами моделирования
* result('S') -- вектор, i-ая компонента -- вероятность, что агент i находится в состоянии S (i = 1,n)
* result('I') -- вектор, i-ая компонента -- вероятность, что агент i находится в состоянии I (i = 1,n)
* result('A') -- вектор, i-ая компонента -- вероятность, что агент i находится в состоянии A (i = 1,n)
* result('P') -- вектор, i-ая компонента -- вероятность, что агент i находится в состоянии P (i = 1,n)
* result('t') -- вектор, время моделирования
* result('y') -- вектор, полный вектор состояний системы во время моделирования

### generateMatrixStA.m
Функция, принимает на вход параметры системы.

Возвращает матрицы узловых и сетевых переходов.

### generateMatrixQ.m
Функция, принимет на вход матрицы сетевых и узловых переходов.

Возвращает матрицы Кирхгофа.

### odeFunc.m
Система дифференциальных уравнений моделирующая распространение информации согласно модели из ВКР. Написана для применения в функции ode45. 
